---
title: 'Git'
date: '2024-12-20 09:46:38'
---

Git 的基础安装不在此赘述，在此记叙些 Git 相关的其它知识。

## 使用 GPG 签名

在基础安装后，其实我们还能做一些有趣的事情 —— 对于我来说，是注意到 Git 提交记录中“未验证”的橙色 Badge 而感兴趣的 —— 就是使用 GPG 来给我们的提交签名 —— 从而使 Badge 变成绿色的“已验证”。

其实我在时间上是更早就在 Git 中使用了 GPG 签名，而 [SSH](/post/SSH) 是更晚接触的，照理，他们可以使用同一套 GPG 公私钥，我应该会在以后统一为一个密钥。

配置方法略，还请自行搜索。

## 使用简洁、明确的标题与约定俗成的提交类型

- 每个提交信息应以一个简短的动词（通常是过去式）开始，描述这次提交的主要修改。
- 标题应简洁明了，尽量不超过 50 个字符。
- 标题后不要加句号 `.`。

示例：

- `feat`: 新功能
- `fix`: 修复 bug
- `docs`: 文档更新
- `style`: 代码格式相关（空格、分号等）
- `refactor`: 代码重构
- `test`: 测试相关
- `chore`: 其他杂项任务

- `fix: Fix login button alignment`
- `feat: Add user 

```plaintext
refactor: extract authentication logic into middleware

This makes the authentication logic reusable across multiple routes
and reduces duplication of code.
```

## 使用小而频繁的提交

避免一次写很多功能，专注于一处，每个提交解决一个问题或完成一个功能。这有助于代码的审查、回滚和后期维护。

## 避免 WIP 提交

如果提交不完整，应该避免推送到主分支。可以使用 `git commit --amend{:bash}` 来修改最后一次提交，其用法和注意事项如下：

1. 修改提交消息

```bash
git commit --amend
```

2. 添加忘提交的文件

```bash
git add <missing_file>
git commit --amend
```

3. 移除误提交的文件

```bash
git rm --cached <wrong_file>
git commit --amend
```

<Alert
  color={'warning'}
  title={'影响提交历史'}
  description={
    "使用 `--amend` 会改变提交的哈希值，因此如果提交已经被推送到远程仓库，修改提交后需要强制推送。\n这可能影响其他协作者的工作，因此慎用。"
  }
/>
